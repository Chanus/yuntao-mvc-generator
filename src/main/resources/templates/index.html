<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8"/>
  <base th:href="@{/}"/>
  <title>yuntao 项目构建</title>
  <meta name="renderer" content="webkit|ie-comp|ie-stand">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta content="*" http-equiv="Access-Control-Allow-Origin"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <meta content="no-siteapp" http-equiv="Cache-Control"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="format-detection" content="telephone=no"/>
  <link rel="stylesheet" th:href="@{/assets/layui/css/layui.css}" media="all"/>
  <link rel="stylesheet" th:href="@{/assets/layui/css/modules/layer/default/layer.css}" media="all"/>
  <link rel="stylesheet" th:href="@{/assets/css/global.css}" media="all"/>
  <style>
    .layui-form-pane .layui-form-label {
      width: 200px !important;
    }

    .layui-form-pane .layui-input-block {
      margin-left: 200px;
    }
  </style>
</head>
<body>
  <div class="layui-tab layui-tab-brief">
    <ul class="layui-tab-title">
      <li class="layui-this">单模块项目构建</li>
      <li>多模块项目构建，后台管理模块不分离</li>
      <li>多模块项目构建，后台管理模块分离</li>
    </ul>
    <div class="layui-tab-content">
      <div class="layui-tab-item layui-show">
        <form class="layui-form layui-form-pane">
          <div class="layui-form-item">
            <label class="layui-form-label">云道版本<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="yuntaoVersion" required lay-verify="required" th:value="${yuntaoVersion }" placeholder="请输入云道后台管理系统版本号" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">name<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="name" required lay-verify="required" placeholder="请输入项目 name" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">groupId<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="groupId" required lay-verify="required" placeholder="请输入项目 groupId" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">artifactId<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="artifactId" required lay-verify="required" placeholder="请输入项目 artifactId" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">version<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="version" required lay-verify="required" value="1.0.0-SNAPSHOT" placeholder="请输入项目版本号" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">系统名称<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="projectName" required lay-verify="required" placeholder="请输入系统名称" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">包名<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="packageName" required lay-verify="required" placeholder="请输入项目包名，项目构建时会在该包目录下创建子包 controller、model、mapper、service.impl" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">作者<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="author" required lay-verify="required" placeholder="请输入项目作者" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">版权说明<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="copyright" required lay-verify="required" placeholder="请输入项目版权说明" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">数据库驱动<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="jdbcDriverClassName" required lay-verify="required" value="com.mysql.cj.jdbc.Driver" placeholder="请输入数据库驱动类" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">数据库服务器地址<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="jdbcHost" required lay-verify="required" placeholder="请输入数据库服务器地址" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">数据库名<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="jdbcSchema" required lay-verify="required" placeholder="请输入数据库名" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">数据库连接用户名<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="jdbcUsername" required lay-verify="required" placeholder="请输入数据库连接用户名" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">数据库连接用密码<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="jdbcPassword" required lay-verify="required" placeholder="请输入数据库连接用密码" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item" pane>
            <label class="layui-form-label">是否启用 Redis<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="radio" name="enableRedis" lay-verify="mustradio" value="true" title="启用">
              <input type="radio" name="enableRedis" value="false" title="不启用" checked>
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">Redis 服务器地址</label>
            <div class="layui-input-block">
              <input type="text" name="redisHost" placeholder="请输入 Redis 服务器地址" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">Redis 服务端口号</label>
            <div class="layui-input-block">
              <input type="text" name="redisPort" value="6379" placeholder="请输入 Redis 服务端口号" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">Redis 连接密码</label>
            <div class="layui-input-block">
              <input type="text" name="redisPassword" placeholder="请输入 Redis 连接密码" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item text-c">
            <div class="layui-inline">
              <button class="layui-btn layui-btn-normal" lay-submit lay-filter="generate-simple">确定</button>
            </div>
          </div>
        </form>
      </div>
      <div class="layui-tab-item">
        <form class="layui-form layui-form-pane">
          <div class="layui-form-item">
            <label class="layui-form-label">云道版本<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="yuntaoVersion" required lay-verify="required" th:value="${yuntaoVersion }" placeholder="请输入云道后台管理系统版本号" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">name<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="name" required lay-verify="required" placeholder="请输入项目 name" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">groupId<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="groupId" required lay-verify="required" placeholder="请输入项目 groupId" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">父项目 artifactId<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="parentArtifactId" required lay-verify="required" placeholder="请输入父项目 artifactId" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">后台管理模块 artifactId<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="managerArtifactId" required lay-verify="required" placeholder="请输入后台管理模块 artifactId" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">version<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="version" required lay-verify="required" value="1.0.0-SNAPSHOT" placeholder="请输入项目版本号" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">系统名称<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="projectName" required lay-verify="required" placeholder="请输入系统名称" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">包名<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="packageName" required lay-verify="required" placeholder="请输入项目包名，项目构建时会在该包目录下创建子包 controller、model、mapper、service.impl" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">作者<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="author" required lay-verify="required" placeholder="请输入项目作者" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">版权说明<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="copyright" required lay-verify="required" placeholder="请输入项目版权说明" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">数据库驱动<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="jdbcDriverClassName" required lay-verify="required" value="com.mysql.cj.jdbc.Driver" placeholder="请输入数据库驱动类" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">数据库服务器地址<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="jdbcHost" required lay-verify="required" placeholder="请输入数据库服务器地址" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">数据库名<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="jdbcSchema" required lay-verify="required" placeholder="请输入数据库名" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">数据库连接用户名<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="jdbcUsername" required lay-verify="required" placeholder="请输入数据库连接用户名" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">数据库连接用密码<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="jdbcPassword" required lay-verify="required" placeholder="请输入数据库连接用密码" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item" pane>
            <label class="layui-form-label">是否启用 Redis<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="radio" name="enableRedis" lay-verify="mustradio" value="true" title="启用">
              <input type="radio" name="enableRedis" value="false" title="不启用" checked>
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">Redis 服务器地址</label>
            <div class="layui-input-block">
              <input type="text" name="redisHost" placeholder="请输入 Redis 服务器地址" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">Redis 服务端口号</label>
            <div class="layui-input-block">
              <input type="text" name="redisPort" value="6379" placeholder="请输入 Redis 服务端口号" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">Redis 连接密码</label>
            <div class="layui-input-block">
              <input type="text" name="redisPassword" placeholder="请输入 Redis 连接密码" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item text-c">
            <div class="layui-inline">
              <button class="layui-btn layui-btn-normal" lay-submit lay-filter="generate-multi">确定</button>
            </div>
          </div>
        </form>
      </div>
      <div class="layui-tab-item">
        <form class="layui-form layui-form-pane">
          <div class="layui-form-item">
            <label class="layui-form-label">云道版本<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="yuntaoVersion" required lay-verify="required" th:value="${yuntaoVersion }" placeholder="请输入云道后台管理系统版本号" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">name<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="name" required lay-verify="required" placeholder="请输入项目 name" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">groupId<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="groupId" required lay-verify="required" placeholder="请输入项目 groupId" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">父项目 artifactId<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="parentArtifactId" required lay-verify="required" placeholder="请输入父项目 artifactId" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">api 模块 artifactId<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="apiArtifactId" required lay-verify="required" placeholder="请输入后台管理 api 模块 artifactId" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">web 模块 artifactId<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="webArtifactId" required lay-verify="required" placeholder="请输入后台管理 web 模块 artifactId" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">version<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="version" required lay-verify="required" value="1.0.0-SNAPSHOT" placeholder="请输入项目版本号" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">系统名称<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="projectName" required lay-verify="required" placeholder="请输入系统名称" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">api 模块包名<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="apiPackageName" required lay-verify="required" placeholder="请输入项目后台管理 api 模块包目录，项目构建时会在该包目录下创建子包 model、mapper、service.impl" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">web 模块包名<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="webPackageName" required lay-verify="required" placeholder="请输入项目后台管理 web 模块包目录，项目构建时会在该包目录下创建子包 controller" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">作者<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="author" required lay-verify="required" placeholder="请输入项目作者" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">版权说明<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="copyright" required lay-verify="required" placeholder="请输入项目版权说明" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">数据库驱动<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="jdbcDriverClassName" required lay-verify="required" value="com.mysql.cj.jdbc.Driver" placeholder="请输入数据库驱动类" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">数据库服务器地址<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="jdbcHost" required lay-verify="required" placeholder="请输入数据库服务器地址" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">数据库名<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="jdbcSchema" required lay-verify="required" placeholder="请输入数据库名" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">数据库连接用户名<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="jdbcUsername" required lay-verify="required" placeholder="请输入数据库连接用户名" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">数据库连接用密码<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="text" name="jdbcPassword" required lay-verify="required" placeholder="请输入数据库连接用密码" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item" pane>
            <label class="layui-form-label">是否启用 Redis<span class="red">*</span></label>
            <div class="layui-input-block">
              <input type="radio" name="enableRedis" lay-verify="mustradio" value="true" title="启用">
              <input type="radio" name="enableRedis" value="false" title="不启用" checked>
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">Redis 服务器地址</label>
            <div class="layui-input-block">
              <input type="text" name="redisHost" placeholder="请输入 Redis 服务器地址" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">Redis 服务端口号</label>
            <div class="layui-input-block">
              <input type="text" name="redisPort" value="6379" placeholder="请输入 Redis 服务端口号" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">Redis 连接密码</label>
            <div class="layui-input-block">
              <input type="text" name="redisPassword" placeholder="请输入 Redis 连接密码" class="layui-input" autocomplete="off">
            </div>
          </div>
          <div class="layui-form-item text-c">
            <div class="layui-inline">
              <button class="layui-btn layui-btn-normal" lay-submit lay-filter="generate-multi-splitting">确定</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script type="text/javascript" th:src="@{/assets/layui/layui.js}"></script>
  <script>
      //注意：选项卡 依赖 element 模块，否则无法进行功能性操作
      layui.use(['element', 'form'], function(){
          var $ = layui.jquery, layer = layui.layer, form = layui.form,element = layui.element;

          // 单模块项目构建
          form.on('submit(generate-simple)', function (data) {
              location.href = 'http://' + window.location.host + '/generate-simple?yuntaoVersion=' + data.field.yuntaoVersion +
                  '&name=' + data.field.name +
                  '&groupId=' + data.field.groupId +
                  '&artifactId=' + data.field.artifactId +
                  '&version=' + data.field.version +
                  '&projectName=' + data.field.projectName +
                  '&packageName=' + data.field.packageName +
                  '&author=' + data.field.author +
                  '&copyright=' + data.field.copyright +
                  '&jdbc.driverClassName=' + data.field.jdbcDriverClassName +
                  '&jdbc.host=' + data.field.jdbcHost +
                  '&jdbc.schema=' + data.field.jdbcSchema +
                  '&jdbc.username=' + data.field.jdbcUsername +
                  '&jdbc.password=' + data.field.jdbcPassword +
                  '&enableRedis=' + data.field.enableRedis +
                  '&redis.host=' + data.field.redisHost +
                  '&redis.port=' + data.field.redisPort +
                  '&redis.password=' + data.field.redisPassword;
              return false;
          });

          // 单模块项目构建
          form.on('submit(generate-multi)', function (data) {
              location.href = 'http://' + window.location.host + '/generate-multi?yuntaoVersion=' + data.field.yuntaoVersion +
                  '&name=' + data.field.name +
                  '&groupId=' + data.field.groupId +
                  '&parentArtifactId=' + data.field.parentArtifactId +
                  '&managerArtifactId=' + data.field.managerArtifactId +
                  '&version=' + data.field.version +
                  '&projectName=' + data.field.projectName +
                  '&packageName=' + data.field.packageName +
                  '&author=' + data.field.author +
                  '&copyright=' + data.field.copyright +
                  '&jdbc.driverClassName=' + data.field.jdbcDriverClassName +
                  '&jdbc.host=' + data.field.jdbcHost +
                  '&jdbc.schema=' + data.field.jdbcSchema +
                  '&jdbc.username=' + data.field.jdbcUsername +
                  '&jdbc.password=' + data.field.jdbcPassword +
                  '&enableRedis=' + data.field.enableRedis +
                  '&redis.host=' + data.field.redisHost +
                  '&redis.port=' + data.field.redisPort +
                  '&redis.password=' + data.field.redisPassword;
              return false;
          });

          // 单模块项目构建
          form.on('submit(generate-multi-splitting)', function (data) {
              location.href = 'http://' + window.location.host + '/generate-multi-splitting?yuntaoVersion=' + data.field.yuntaoVersion +
                  '&name=' + data.field.name +
                  '&groupId=' + data.field.groupId +
                  '&parentArtifactId=' + data.field.parentArtifactId +
                  '&apiArtifactId=' + data.field.apiArtifactId +
                  '&webArtifactId=' + data.field.webArtifactId +
                  '&version=' + data.field.version +
                  '&projectName=' + data.field.projectName +
                  '&apiPackageName=' + data.field.apiPackageName +
                  '&webPackageName=' + data.field.webPackageName +
                  '&author=' + data.field.author +
                  '&copyright=' + data.field.copyright +
                  '&jdbc.driverClassName=' + data.field.jdbcDriverClassName +
                  '&jdbc.host=' + data.field.jdbcHost +
                  '&jdbc.schema=' + data.field.jdbcSchema +
                  '&jdbc.username=' + data.field.jdbcUsername +
                  '&jdbc.password=' + data.field.jdbcPassword +
                  '&enableRedis=' + data.field.enableRedis +
                  '&redis.host=' + data.field.redisHost +
                  '&redis.port=' + data.field.redisPort +
                  '&redis.password=' + data.field.redisPassword;
              return false;
          });
      });
  </script>
</body>
</html>